pipeline{
	agent  any
	tools{
	  maven "maven3.9.9"
	}
	stages{
	  stage('clonefromscm'){
	    steps{
	      sh "echo jenkins is clonefromscm"
	      git branch: 'dec11', url: 'https://github.com/tenbanliontech/liontech-joinedproject.git'
	    }
	  }

	  stage('Maven-Build'){
	    steps{
	      sh "echo 'running Junit test on the source code'"
	      sh "echo 'maven is packaging the source code'"
	      sh "mvn verify"
	      sh "mvn validate"
	      sh "mvn install"
	      sh "mvn clean package"

	    }
	  }

	  //stage('code quality analysis'){
	    //steps{
	      //sh "echo 'sonaeqube code quality inspection'"
	      //sh "mvn sonar:sonar"
	    //}
	  //}

       stage('UploadArtifactToNexus'){
	    steps{
	      sh "mvn deploy"
	    }
	  }
      
      stage('deploy to dev'){
	    steps{
	      deploy adapters: [tomcat9(credentialsId: 'TOMCAT-CRED2', path: '', url: 'http://54.209.200.161:8009/manager/html')], contextPath: 'demo-1', war: 'target/*.war'
	    }
	  }
	}
}